<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="color-scheme" content="dark light" />
  <title>StingJS Demo ‚Äî Glows When Complexity Is Near</title>

  <script src="../dist/sting.global.js" defer></script>
  <script src="./example.js" type="module" defer></script>

  <link rel="stylesheet" href="./main.css" />
</head>

<body>
  <div class="wrap" id="demoRoot">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div style="min-width:0">
          <h1>StingJS Demo Arena</h1>
          <p class="subtitle">A tiny reactive library that glows when complexity is near.</p>
        </div>
      </div>

      <div class="pillrow" aria-label="Build info">
        <span class="pill">global build: <span class="kbd">sting.global.js</span></span>
        <span class="pill">directives:
          <span class="kbd">text</span>
          <span class="kbd">show</span>
          <span class="kbd">on</span>
          <span class="kbd">debug</span>
          <span class="kbd">model</span>
          <span class="kbd">bind</span>
          <span class="kbd">if</span>
          <span class="kbd">effect</span>
        </span>
      </div>
    </header>

    <main>
      <!-- LEFT: Components -->
      <section class="card" aria-labelledby="left-title">
        <header>
          <h2 id="left-title">üßô‚Äç‚ôÇÔ∏è Components</h2>
        </header>

        <div class="content">
          <!-- PROFILE -->
          <section class="card" aria-labelledby="profile-title">
            <header>
              <h2 id="profile-title">Profile (x-text, x-show, x-on, x-model, x-debug)</h2>
            </header>

            <!-- NOTE: data-testid added; no layout impact -->
            <div class="content" x-data="profile" data-testid="profile">
              <div class="row">
                <button class="btn" x-on:click="toggle">Toggle visibility</button>
                <button class="btn warn" x-on:click="rename">Rename ‚Üí Frodo</button>
                <button class="btn bad" x-on:click="destroyMe">Remove component</button>
              </div>

              <label>
                Name (two-way bound)
                <input class="input" x-bind:title="user.name" x-model="user.name" placeholder="Type a hobbit name..."
                  data-testid="profile-name-input" />
              </label>

              <div class="row">
                <div class="debug" x-debug="$open" data-testid="profile-open-debug"></div>
              </div>

              <div class="sep"></div>

              <p class="hint">
                The span below is guarded by <span class="kbd">x-show="open"</span> and populated by
                <span class="kbd">x-text="user.name"</span>.
              </p>

              <p data-testid="profile-greeting">
                <span x-show="open">
                  üëã Hello, <strong><span x-text="user.name"></span></strong>. Your UI currently glows at:
                  <span class="kbd"><span x-text="glowLevel"></span></span>
                </span>
              </p>
            </div>
          </section>

          <!-- COUNTER -->
          <section class="card" aria-labelledby="counter-title">
            <header>
              <h2 id="counter-title">Counter (events + derived output)</h2>
            </header>

            <!-- NOTE: data-testid added; no layout impact -->
            <div class="content" x-data="counter" data-testid="counter">
              <div class="row">
                <button class="btn good" x-on:click="inc">+1</button>
                <button class="btn" x-on:click="dec">-1</button>
                <button class="btn warn" x-on:click="reset">Reset</button>
              </div>

              <p class="hint">
                If this breaks, a framework just got its wings.
              </p>

              <div class="row">
                <div class="debug" x-debug="$count" data-testid="counter-count-debug"></div>
                <div class="debug" data-testid="counter-mood">
                  mood: <span class="kbd"><span x-text="mood"></span></span>
                </div>
              </div>
            </div>
          </section>

          <!-- FORM LAB -->
          <section class="card" aria-labelledby="formlab-title">
            <header>
              <h2 id="formlab-title">Form Lab (checkbox + select via x-model)</h2>
            </header>

            <!-- NOTE: data-testid added; no layout impact -->
            <div class="content" x-data="formLab" data-testid="formLab">
              <label>
                Choose your fellowship role (select)
                <select x-model="role" data-testid="form-role">
                  <option value="burglar">Burglar</option>
                  <option value="wizard">Wizard</option>
                  <option value="ranger">Ranger</option>
                  <option value="dwarf">Dwarf (complains, but helps)</option>
                </select>
              </label>

              <div class="row">
                <label style="display:flex; gap:10px; align-items:center">
                  <input type="checkbox" x-model="stealthMode" data-testid="form-stealth" />
                  <span>Stealth mode (checkbox)</span>
                </label>
              </div>

              <div class="row">
                <div class="debug" x-debug="$role" data-testid="form-role-debug"></div>
                <div class="debug" x-debug="$stealthMode" data-testid="form-stealth-debug"></div>
              </div>

              <p data-testid="form-summary">
                Current build: <span class="kbd"><span x-text="summary"></span></span>
              </p>
            </div>
          </section>

          <!-- CLASS LAB -->
          <section class="card" aria-labelledby="classlab-title">
            <header>
              <h2 id="classlab-title">Class Lab (x-bind:class object syntax)</h2>
            </header>

            <!-- NOTE: data-testid added; no layout impact -->
            <div class="content" x-data="classLab" data-testid="classLab">
              <p class="hint">
                This tests <span class="kbd">x-bind:class</span> with <span class="kbd">{ className: boolean }</span>.
                Base classes stay, bound classes add/remove.
              </p>

              <div class="row">
                <button class="btn" x-on:click="toggleHot" data-testid="class-toggle-hot">Toggle ‚Äúhot‚Äù</button>
                <button class="btn" x-on:click="toggleDanger" data-testid="class-toggle-danger">Toggle ‚Äúdanger‚Äù</button>
                <button class="btn warn" x-on:click="reset" data-testid="class-reset">Reset</button>
              </div>

              <div class="row">
                <button class="btn" x-bind:class="btnClass" x-bind:title="titleText" x-on:click="boop"
                  data-testid="class-boop">
                  Boop me
                </button>

                <span class="kbd" data-testid="class-preview">
                  class = <span x-text="classPreview"></span>
                </span>
              </div>

              <div class="row">
                <div class="debug" x-debug="$hot" data-testid="class-hot-debug"></div>
                <div class="debug" x-debug="$danger" data-testid="class-danger-debug"></div>
              </div>
            </div>
          </section>

          <!-- X-IF LAB -->
          <section class="card" aria-labelledby="iflab-title">
            <header>
              <h2 id="iflab-title">If Lab (x-if on &lt;template&gt; + hydration)</h2>
            </header>

            <div class="content" x-data="ifLab" data-testid="ifLab">
              <p class="hint">
                This tests <span class="kbd">x-if</span> inserting/removing DOM and ensuring inserted nodes get hydrated
                (<span class="kbd">x-text</span>, <span class="kbd">x-on</span>, <span class="kbd">x-model</span>).
              </p>

              <div class="row">
                <button class="btn" x-on:click="toggle">Toggle block</button>
                <button class="btn warn" x-on:click="reset">Reset</button>

                <span class="pill">
                  open = <span class="kbd"><span x-text="openLabel"></span></span>
                </span>

                <span class="pill">
                  clicks = <span class="kbd"><span x-text="clicks"></span></span>
                </span>
              </div>

              <div class="sep"></div>

              <!-- IMPORTANT: x-if lives on template -->
              <template x-if="open">
                <section class="iflab__block" data-testid="ifBlock">
                  <div class="row">
                    <strong class="iflab__title">
                      Spawned block:
                      <span class="kbd" data-testid="ifName"><span x-text="name"></span></span>
                    </strong>

                    <button class="btn good" x-on:click="inc" data-testid="ifInc">+1 click</button>
                  </div>

                  <label>
                    Name inside the block (x-model hydration test)
                    <input class="input" x-model="name" data-testid="ifInput" placeholder="Type a wizard name..." />
                  </label>

                  <p class="hint">
                    This whole block is created/destroyed by <span class="kbd">x-if</span>. If the input + button work
                    after
                    toggling, hydration is good.
                  </p>
                </section>
              </template>

              <p class="hint" data-testid="ifGoneHint">
                When <span class="kbd">open</span> is false, the spawned block should not exist in the DOM.
              </p>
            </div>
          </section>

          <!-- X-FOR LAB -->
          <section class="card" aria-labelledby="forlab-title">
            <header>
              <h2 id="forlab-title">For Lab (x-for on &lt;template&gt;)</h2>
            </header>

            <div class="content" x-data="forLab" data-testid="forLab">
              <p class="hint">
                Tests <span class="kbd">x-for</span> cloning template content and hydrating
                <span class="kbd">x-text</span> + <span class="kbd">x-on</span>.
              </p>

              <div class="row">
                <button class="btn good" x-on:click="add" data-testid="for-add">+ Add</button>
                <button class="btn" x-on:click="pop" data-testid="for-pop">Pop</button>
                <button class="btn warn" x-on:click="reset" data-testid="for-reset">Reset</button>
                <span class="pill">len = <span class="kbd"><span x-text="len"></span></span></span>
              </div>

              <div class="sep"></div>

              <ul class="forlab__list" data-testid="for-list">
                <template x-for="(t, i) in items">
                  <li class="forlab__item" data-testid="for-item">
                    <span class="kbd">#<span x-text="i"></span></span>
                    <span x-text="t"></span>
                    <button class="btn" x-on:click="remove(i)" data-testid="for-remove">remove</button>
                  </li>
                </template>
              </ul>
            </div>
          </section>

          <!-- X-EFFECT LAB -->
          <section class="card" aria-labelledby="effectlab-title">
            <header>
              <h2 id="effectlab-title">Effect Lab (x-effect)</h2>
            </header>

            <div class="content" x-data="effectLab" data-testid="effectLab">
              <p class="hint">
                Tests <span class="kbd">x-effect</span> running a side-effect function that tracks deps + supports
                cleanup.
              </p>

              <div class="row">
                <button class="btn good" x-on:click="inc" data-testid="effect-inc">+1</button>
                <button class="btn warn" x-on:click="removeSelf" data-testid="effect-remove">Remove component</button>

                <span class="pill">
                  count = <span class="kbd"><span x-text="count"></span></span>
                </span>

                <span class="pill">
                  runs = <span class="kbd"><span x-text="runs"></span></span>
                </span>

                <span class="pill">
                  cleans = <span class="kbd"><span x-text="cleans"></span></span>
                </span>
              </div>

              <div class="sep"></div>

              <!-- Directive under test -->
              <div x-effect="track" data-testid="effect-hook"></div>
            </div>
          </section>

          <!-- X-IF LEAK REGRESSION LAB -->
          <section class="card" aria-labelledby="ifleak-title">
            <header>
              <h2 id="ifleak-title">If Leak Lab (x-if teardown regression)</h2>
            </header>

            <div class="content" x-data="ifLeakLab" data-testid="ifLeakLab">
              <p class="hint">
                When the block is hidden, <span class="kbd">x-effect</span> inside the template must be disposed.
                Bumping while hidden must not increase runs.
              </p>

              <div class="row">
                <button class="btn" x-on:click="toggle" data-testid="ifLeak-toggle">Toggle block</button>
                <button class="btn good" x-on:click="bump" data-testid="ifLeak-bump">Bump tick</button>

                <span class="pill">
                  runs = <span class="kbd"><span x-text="runs" data-testid="ifLeak-runs"></span></span>
                </span>
              </div>

              <template x-if="open">
                <div class="debug" x-effect="track" data-testid="ifLeak-mounted">
                  mounted effect
                </div>
              </template>
            </div>
          </section>

        </div>
      </section>

      <!-- RIGHT: Harness / Notes -->
      <aside class="card" aria-labelledby="right-title">
        <header>
          <h2 id="right-title">üß™ Test Harness Notes</h2>
        </header>

        <div class="content">
          <section>
            <h3 style="margin:0; font-size:13px; font-family:var(--mono);">What this page tests</h3>
            <ul style="margin:10px 0 0 18px; color:var(--muted);">
              <li><span class="kbd">x-text</span> reading nested paths</li>
              <li><span class="kbd">x-show</span> toggling display</li>
              <li><span class="kbd">x-on</span> binding click handlers</li>
              <li><span class="kbd">x-model</span> input/select/checkbox 2-way binding</li>
              <li><span class="kbd">x-bind</span> attribute + class binding</li>
              <li><span class="kbd">x-if</span> template insertion + hydration</li>
              <li><span class="kbd">x-effect</span> side-effects that track deps + cleanup</li>
              <li><span class="kbd">MutationObserver</span> cleanup when a component root is removed</li>
            </ul>
          </section>

          <div class="sep"></div>
        </div>
      </aside>
    </main>

    <footer>
      Forged in the depths of DragonByte Labs &mdash; <a href="https://github.com/dragonbytelabs/stingjs"
        target="_blank" rel="noopener">View source on GitHub</a>
    </footer>
  </div>
</body>

</html>
